<%@page import="adm.alumno.spring.AdmSalud"%>
<%@page import="adm.alumno.spring.AdmSolicitud"%>
<%@page import="adm.alumno.spring.AdmCartaSubir"%>

<%@ include file= "../head.jsp"%>
<%@ include file= "../menu.jsp"%>

<head> 
	<link rel="STYLESHEET" href="/admision.css"  type="text/css">
	<script src="js/jquery-1.5.1.min.js" type="text/javascript"></script>
  	<script src='js/Globo/jquery.tinyTips2.js' type='text/javascript'></script>		
	<style>		
		body{
			background-image: url("<%=request.getContextPath()%>/imagenes/Biblioteca.png");
			/* Para dejar la imagen de fondo centrada, vertical y horizontalmente */
			background-position: center center;
			/* La imagen se fija en la ventana de visualización para que la altura de la imagen no supere a la del contenido */
			background-attachment: fixed;
			background-repeat: no-repeat;
			/* La imagen de fondo se reescala automáticamente con el cambio del ancho de ventana del navegador */
			background-size: cover;	
		} 
		a {text-decoration: none;} 
		a:hover {text-decoration: underline;} 
		.tabla td{padding:5px;}
		
		.tinyTip {
			width: 325px;
			padding: 17px 0px 0px 0px;
			display: block;
			background: url(js/Globo/tinyTip-top.png) 0px 0px no-repeat;
		}
		.tinyTip .content {
			padding: 0px 15px 0px 15px;
			font-size: 14px;
			font-family: "Lucida Sans Unicode";
			color: #010101;
			background: url(js/Globo/tinyTip-content.png) 0px 0px repeat-y;
		}
		.tinyTip .bottom {
			height: 47px;
			background: url(js/Globo/tinyTip-bottom.png) 0px 0px no-repeat;
			font: 0px/0px sans-serif;
		}
		.fa{
			color: black;
		}
		a> .fa{
			color: #337ab7;
		}
		
		@media (min-width: 587px) {
			.col-md-3{
				float: left;
				margin-left: 85px;
			}
		}
		@media (min-width: 764px) {
			.col-md-3{
				float: left;
				margin-left: 0;
			}		
		}
		@media (min-width: 480px) {
			.col-md-5{
				float: left;
			}
		}	
	</style>	
	<script>
		function cambiarEnfermedad(){
		
			if(document.frmSalud.Enfermedad.value == 'S'){
				document.getElementById('Enfermedad2').style.visibility = 'visible';
				document.getElementById('EnfermedadDato').style.visibility = 'visible';
			}else{
				document.getElementById('Enfermedad2').style.visibility = 'hidden';
				document.getElementById('EnfermedadDato').style.visibility = 'hidden';
			}
		}
		function cambiarImpedimento(){
		
			if(document.frmSalud.Impedimento.value == 'S'){
				document.getElementById('Impedimiento2').style.visibility = 'visible';
				document.getElementById('ImpedimientoDato').style.visibility = 'visible';
			}else{
				document.getElementById('Impedimiento2').style.visibility = 'hidden';
				document.getElementById('ImpedimientoDato').style.visibility = 'hidden';
			}
		}
		
		function grabar(){
			var grabar = "S"; 	
		
			if($("Enfermedad").value == "S" && $("EnfermedadDato").value == "" ){
				alert("Favor de especificar la enfermedad cr�nica");
				$("EnfermedadDato").focus();
				grabar = "N";	
			}
			
			if($("Impedimento").value == "S" && $("ImpedimentoDato").value == "" ){
				alert("Favor de especificar el impedimento f�sico");
				$("ImpedimentoDato").focus();	
				grabar = "N";
			}
			
			if(grabar=="S"){
				document.frmSalud.submit();
			}
		}
	</script>
</head>
<% 	
	String folio 		= (String)session.getAttribute("Folio")==null?"0":(String)session.getAttribute("Folio");
	String grabo 		= request.getParameter("Grabo")==null?"-":request.getParameter("Grabo");
	AdmSalud salud 		= (AdmSalud)request.getAttribute("admSalud");
	boolean existe		= (boolean)request.getAttribute("existe");	
	String colorGrabar	= existe?"style='color:purple'":"style='color:orange'";
	
	AdmSolicitud admSolicitud 	= (AdmSolicitud) request.getAttribute("admSolicitud");	
	AdmCartaSubir admCartaSubir = (AdmCartaSubir)request.getAttribute("admCartaSubir");
%>
<body>
	<div class="container-fluid">
		<div class="row">
			<div class="col-lg-1" style="background-color:rgba(255, 255, 255, 0.7);">
				<span class="btn btn-outline-light" style="width: 100px; font-size: 13px;">
					<a href="<%=request.getContextPath()%>/registro" style="color:black">					
						<span data-bs-toggle="tooltip" data-bs-placement="right" title="Datos usuario"><i class="fas fa-user fa-2x"></i><br>Cuenta</span>&nbsp;
					</a>
				</span>
				<span class="btn btn-outline-light" style="width: 100px; font-size: 13px;">
					<a href="<%=request.getContextPath()%>/solicitud/modalidad" style="color:black">					
						<span data-bs-toggle="tooltip" data-bs-placement="right" title="Solicitud de admisi�n"><i class="far fa-file-alt fa-2x"></i><br>Solicitud</span>&nbsp;
					</a>
				</span>			
				<span class="btn btn-outline-light" style="width: 100px; font-size: 13px;">
					<a href="<%=request.getContextPath()%>/documentos/documentos" style="color:black">					
						<span data-bs-toggle="tooltip" data-bs-placement="right" title="Documentos de ingreso"><i class="fas fa-tasks fa-2x"></i><br>Documentos</span>&nbsp;
					</a>
				</span>					
				<span class="btn btn-outline-light tip" style="width: 100px; font-size: 13px;">
					<a href="<%=request.getContextPath()%>/directo/ingreso" style="color:black">
						<span data-bs-toggle="tooltip" data-bs-placement="right" title="Ingreso directo"><i class="fas fa-door-open fa-2x"></i><br>Ingreso</span>&nbsp;
					</a>
				</span>					
				<span class="btn btn-outline-light tip" style="width: 100px; font-size: 13px;">
					<a href="<%=request.getContextPath()%>/referencias?Folio=<%=folio%>" style="color:black">
						<span data-bs-toggle="tooltip" data-bs-placement="right" title="Pago en linea"><i class="fas fa-credit-card fa-2x"></i><br>Pago</span>&nbsp;
					</a>
				</span>					
				<span class="btn btn-outline-light tip" style="width: 100px; font-size: 13px;">
					<a href="<%=request.getContextPath()%>/cita/evento" style="color:black">
						<span data-bs-toggle="tooltip" data-bs-placement="right" title="Reservar examen"><i class="far fa-calendar-alt fa-2x"></i><br>Examen</span>&nbsp;
					</a>
				</span>					
				<span class="btn btn-outline-light tip" style="width: 100px; font-size: 13px;">
					<a href="<%=request.getContextPath()%>/resultados/resultados" style="color:black">
						<span data-bs-toggle="tooltip" data-bs-placement="right" title="Resultados examen"><i class="fas fa-trophy fa-2x"></i><br>Resultados</span>&nbsp;
					</a>
				</span>					
				<span class="btn btn-outline-light tip" style="width: 100px; font-size: 13px;">
<% 				String colorCarta = "black";
				if(admCartaSubir.getCarta() != null){	
					colorCarta = "green";										
 				}%>												
				<a href="<%=request.getContextPath()%>/descargarCartaAdmision" style="color:<%=colorCarta%>">
						<span data-bs-toggle="tooltip" data-bs-placement="right" title="Carta de admisi&oacute;n"><i class="fas fa-envelope fa-2x"></i><br>Carta</span>&nbsp;
					</a>
				</span>					
			</div>
			<div class="col-lg-11" style="background-color:white; min-height:calc(100vh - 37px);">   
				<div class="d-flex bd-highlight page-header">
					<div class="p-2 w-100 bd-highlight">
						<h2><i class="fas fa-check-circle" aria-hidden="true" <%=colorGrabar%>></i>&nbsp;<spring:message code="solicitud.salud.Salud"/></h2>
					</div>
					<div class="p-2 flex-shrink-1 bd-highlight">
						<div class="d-flex align-items-center">
							<a href="<%=request.getContextPath()%>/solicitud/otroEstudio"><i class="fas fa-caret-left fa-3x"></i></a>
							&nbsp;<b class="fs-5">5/8</b>&nbsp;
<%						if(existe){ %>
		   					<a href="<%=request.getContextPath()%>/solicitud/tutor"><i class="fas fa-caret-right fa-3x"></i></a>
<%						}else{
							out.print("&nbsp;");
						}%>	  
						</div> 
					</div>
				</div>
				<div class="alert alert-info" role="alert">
					<p> <spring:message code="solicitud.salud.InfoSalud"/>:
				</div>
				<form id="frmSalud" name="frmSalud" action="grabarSalud" method="post">					
					<div class="col-md-6">
						<label><spring:message code="solicitud.salud.EnfermedadCronica"/></label>
						<select class="form-select" name="Enfermedad" id="Enfermedad" onchange="javascript:cambiarEnfermedad();">
							<option value="N" <%if(salud.getEnfermedad().equals("N")){out.print("selected");} %>>No</option>
							<option value="S" <%if(salud.getEnfermedad().equals("S")){out.print("selected");} %>>Si</option>
						</select>
						<br>
						<label><spring:message code="solicitud.salud.ImpedimentoFisico"/></label>
						<select class="form-select" name="Impedimento" id="Impedimento" onchange="javascript:cambiarImpedimento();">
							<option value="N" <%if(salud.getImpedimento().equals("N")){out.print("selected");} %>>No</option>
							<option value="S" <%if(salud.getImpedimento().equals("S")){out.print("selected");} %>>Si</option>
						</select>
						<br>					
						<label id="Enfermedad2" ><spring:message code="solicitud.salud.Especifique"/>:</label>
						<input class="form-control" name="EnfermedadDato" id="EnfermedadDato" type="text" value="<%=salud.getEnfermedadDato()%>" maxlength="100" size="30">
						<br>						
						<label id="Impedimiento2"><spring:message code="solicitud.salud.Especifique"/>:</label>
						<input class="form-control" id="ImpedimientoDato" name="ImpedimentoDato" type="text" value="<%=salud.getImpedimentoDato()%>" maxlength="100" size="30">
						<br>						
					</div>
<%				if(admSolicitud.getEstado().equals("1")){ %>
					<div>
						<button type="button" class="btn alert-info" onclick="grabar();"><spring:message code="adm.Guardar"/></button>
					</div>
<%				}%>
				</form>
			</div>
		</div>
	</div>
	<script>
		cambiarEnfermedad();
		cambiarImpedimento();
	</script>
</body >
<% if (grabo.equals("S")){%>
	<table align="center"><tr><td><spring:message code="solicitud.salud.Grabo"/></td></tr></table>
	<meta http-equiv="refresh" content="1;url=tutor" />
<%}else if(grabo.equals("N")){%>
	<table align="center"><tr><td><spring:message code="solicitud.salud.NoGrabo"/></td></tr></table>
<%}%>