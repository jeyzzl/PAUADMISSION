<%@ include file= "../head.jsp"%>
<%@ include file= "../menu.jsp"%>

<%@page import="adm.alumno.spring.AdmSolicitud"%>
<%@page import="adm.alumno.spring.AdmCartaSubir"%>

<head>
<link rel="STYLESHEET" href="/admision.css"  type="text/css">	  			
	<style>		
		body{
			background-image: url("<%=request.getContextPath()%>/imagenes/Biblioteca.png");
			/* Para dejar la imagen de fondo centrada, vertical y horizontalmente */
			background-position: center center;
			/* La imagen se fija en la ventana de visualización para que la altura de la imagen no supere a la del contenido */
			background-attachment: fixed;
			background-repeat: no-repeat;
			/* La imagen de fondo se reescala automáticamente con el cambio del ancho de ventana del navegador */
			background-size: cover;	
		}				
		@media (min-width: 587px) {
			.col-md-3{
				float: left;
				margin-left: 85px;
			}
		}
		@media (min-width: 764px) {
			.col-md-3{
				float: left;
				margin-left: 0;
			}		
		}
		@media (min-width: 480px) {
			.col-md-5{
				float: left;
			}
		}	
	</style>	
		
	<script type="text/javascript">
		function guardarArchivo(){
			if($("archivo").value != ""){	
				document.frmArchivo.submit();
			}else
				alert("Selecciona el archivo a subir");
		}
		
		function borrarArchivo(documentoId){
			if(confirm("¿Deseas eliminar el documento?")){
				document.location.href = "borrararchivo?documentoId="+documentoId;
			}
		}
	</script>
</head>
<%	 
	String folio 			= (String)session.getAttribute("Folio")==null?"0":(String)session.getAttribute("Folio");
	String documentoId 		= request.getParameter("documentoId")==null?"0":request.getParameter("documentoId");	
	boolean existeArchivo	= (boolean)request.getAttribute("existeArchivo");
	String estado 			= (String)request.getAttribute("estado");
	String nombreArchivo	= (String)request.getAttribute("nombreArchivo");
	String nombreDocumento	= (String)request.getAttribute("nombreDocumento");
	String iconoArchivo		= "X";
	String esImagen			= (String)request.getAttribute("esImagen");
	String vacio			= (String)request.getAttribute("vacio");
	
	AdmSolicitud admSolicitud		= (AdmSolicitud)request.getAttribute("admSolicitud");
	AdmCartaSubir admCartaSubir 	= (AdmCartaSubir)request.getAttribute("admCartaSubir");
	
	if (nombreArchivo.contains(".doc")||nombreArchivo.contains(".docx")) 
		iconoArchivo = "<img src='../imagenes/word.png' style='height:30px'> "+nombreArchivo;
	else if (nombreArchivo.contains(".xls")||nombreArchivo.contains(".xlsx")) 
			iconoArchivo = "<img src='../imagenes/word.png' style='height:30px'> "+nombreArchivo;
	else if (nombreArchivo.contains(".ppt")||nombreArchivo.contains(".pptx")) 
				iconoArchivo = "<img src='../imagenes/word.png' style='height:30px'> "+nombreArchivo;		
	else if (nombreArchivo.contains(".pdf")) 
		iconoArchivo = "<img src='../imagenes/word.png' style='height:30px'> "+nombreArchivo;			
	else
		iconoArchivo = "<span class='glyphicon glyphicon-folder-open' aria-hidden='true'> "+nombreArchivo+"</span>";
		
%>
<body>
<div class="container-fluid">
	<div class="row">
		<div class="col-lg-1" style="background-color:rgba(255, 255, 255, 0.7);">
			<span class="btn btn-outline-light" style="width: 100px; font-size: 13px;">
				<a href="<%=request.getContextPath()%>/registro" style="color:black">					
					<span data-bs-toggle="tooltip" data-bs-placement="right" title="Datos usuario"><i class="fas fa-user fa-2x"></i><br>Cuenta</span>&nbsp;
				</a>
			</span>
			<span class="btn btn-outline-light" style="width: 100px; font-size: 13px;">
				<a href="<%=request.getContextPath()%>/solicitud/modalidad" style="color:black">					
					<span data-bs-toggle="tooltip" data-bs-placement="right" title="Solicitud de admisi�n"><i class="far fa-file-alt fa-2x"></i><br>Solicitud</span>&nbsp;
				</a>
			</span>			
			<span class="btn btn-outline-light" style="width: 100px; font-size: 13px;">
				<a href="<%=request.getContextPath()%>/documentos/documentos" style="color:black">					
					<span data-bs-toggle="tooltip" data-bs-placement="right" title="Documentos de ingreso"><i class="fas fa-tasks fa-2x"></i><br>Documentos</span>&nbsp;
				</a>
			</span>					
			<span class="btn btn-outline-light tip" style="width: 100px; font-size: 13px;">
				<a href="<%=request.getContextPath()%>/directo/ingreso" style="color:black">
					<span data-bs-toggle="tooltip" data-bs-placement="right" title="Ingreso directo"><i class="fas fa-door-open fa-2x"></i><br>Ingreso</span>&nbsp;
				</a>
			</span>					
			<span class="btn btn-outline-light tip" style="width: 100px; font-size: 13px;">
				<a href="<%=request.getContextPath()%>/referencias?Folio=<%=folio%>" style="color:black">
					<span data-bs-toggle="tooltip" data-bs-placement="right" title="Pago en linea"><i class="fas fa-credit-card fa-2x"></i><br>Pago</span>&nbsp;
				</a>
			</span>					
			<span class="btn btn-outline-light tip" style="width: 100px; font-size: 13px;">
				<a href="<%=request.getContextPath()%>/cita/evento" style="color:black">
					<span data-bs-toggle="tooltip" data-bs-placement="right" title="Reservar examen"><i class="far fa-calendar-alt fa-2x"></i><br>Examen</span>&nbsp;
				</a>
			</span>					
			<span class="btn btn-outline-light tip" style="width: 100px; font-size: 13px;">
				<a href="<%=request.getContextPath()%>/resultados/resultados" style="color:black">
					<span data-bs-toggle="tooltip" data-bs-placement="right" title="Resultados examen"><i class="fas fa-trophy fa-2x"></i><br>Resultados</span>&nbsp;
				</a>
			</span>					
			<span class="btn btn-outline-light tip" style="width: 100px; font-size: 13px;">
<% 				String colorCarta = "black";
				if(admCartaSubir.getCarta() != null){	
					colorCarta = "green";										
 				}%>												
				<a href="<%=request.getContextPath()%>/descargarCartaAdmision" style="color:<%=colorCarta%>">
					<span data-bs-toggle="tooltip" data-bs-placement="right" title="Carta de admisi&oacute;n"><i class="fas fa-envelope fa-2x"></i><br>Carta</span>&nbsp;
				</a>
			</span>					
		</div>
		<div class="col-lg-11" style="background-color:white; min-height:calc(100vh - 37px);">
			<div class="page-header">
		  		<h2><%=nombreDocumento%></h2>
			</div>
			<div class="alert alert-info" role="alert">
				<a href="documentos" class="btn btn-primary"><i class="fas fa-arrow-left"></i></a>	  
			</div>
				<%if (existeArchivo && !estado.equals("A")){%>
					<h4>
					<%=iconoArchivo%>	
					<a href="javascript:borrarArchivo('<%=documentoId%>')" class="btn btn-danger btn-sm"><i class="fas fa-times"></i></a>
					</h4>				
				<%}%>	
<%	if(vacio.equals("1")){%>	
		<h2 style="color: red;">Elige un archivo</h2>
<%  }%>	
				<h2><b><font size="5"><spring:message code='documentos.archivo.SubirArchivo'/></font></b></h2>
				<!-- ----------------------IMAGENES-------------------- -->
<% 		if(!existeArchivo){%>
<%			if (!estado.equals("A")){ %>
				<form name="frmArchivo" id="frmArchivo" enctype="multipart/form-data" action="guardararchivo?documentoId=<%=documentoId%>" method="post">
					<div class="fileupload fileupload-new" data-provides="fileupload">
<%					if(admSolicitud.getEstado().equals("2")){ %>	
						<span class="btn  btn-default btn-file">
					    	<span class="fileupload-new"><spring:message code='documentos.archivo.SeleccionArchivo'/></span>
					    	<input type="file" id="archivo" name="archivo"/>
						</span><br>			
						<button class="btn btn-primary btn-large" onclick="quitarArchivo();"><spring:message code='documentos.archivo.Quitar'/></button>
						<button class="btn btn-primary btn-large" id="btnGuardar" value="Enviar" onclick="guardarArchivo();" class="enviar" > <spring:message code='documentos.archivo.Enviar'/></button>
<% 					} %>	
					</div>
<% 					if(esImagen.equals("1")){%>
				    	<h2 style="color: red;"><spring:message code='documentos.archivo.TipoArchivo'/></h2>
<% 					}%>	
				</form>
<% 			}%>	
<% 		}	
 		if(existeArchivo){%>
 			<a href="descargarPDF?documentoId=<%=documentoId%>" class="btn btn-warning"> <i class="fas fa-download fa-2x"></i> PDF</a>
<% 		} %>	
		</div>
	</div>
</div>	
</body>